<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <title>BUS BOOKING</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Blinker:wght@300;400&display=swap');
.column {
  float: left;
  width: 25%;
  padding: 0 10px;

}

/* Remove extra left and right margins, due to padding */
.row {margin: 0 -5px;}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Responsive columns */
@media screen and (max-width: 600px) {
  .column {
    width: 100%;
    display: block;
    margin-bottom: 20px;
  }
}

/* Style the counter cards */
.card {
  box-shadow: 2px 4px 10px 0 white;
  padding: 16px;
  text-align: left;
  background-color:black;
  opacity: .90;
  height: 240px;
  width: 220px;
  border-radius: 9px;
  border: 2px;
}
.image img{
	border-radius: 50%;
}



    </style>
</head>
<body>
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <ul class="nav navbar-nav">
            <li class="active" style="background-color: #4CAF50;"><a href="http://127.0.0.1:8000/home/"><i
                    class="material-icons">home</i></a></li>
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">FeedBack
                    <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li><a href="http://127.0.0.1:8000/feedBack/ViewFeedBack/">View Feedback</a></li>
                    <li><a href="http://127.0.0.1:8000/feedBack/">GiveFeedback</a></li>
                </ul>
            </li>
            <li><a class="nav-link" href="http://127.0.0.1:8000/feedBack/about/">About US</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="material-icons">person</i>
                    <span class="caret"></span></a>
                {% if user.is_superuser %}
                <ul class="dropdown-menu">
                    <li><a href="http://127.0.0.1:8000/admin/auth/user/">view profile</a></li>
                    <li><a href="http://127.0.0.1:8000/Booking/cancelTicket">Cancel Reservation</a></li>
                    <li><a href="http://127.0.0.1:8000/admin/Booking/reservation/">See
                        Reservation</a></li>
                    <li><a href="http://127.0.0.1:8000/home/deleteaccount">Delete Account</a></li>
                    <li><a href="http://127.0.0.1:8000/admin/bus/bus/">see bus</a></li>
                    <li><a href="http://127.0.0.1:8000/admin/bus/bus/add/">add bus</a></li>
                    <li><a href="http://127.0.0.1:8000/admin/Booking/transaction/">see transactions</a></li>
                    <li><a href="http://127.0.0.1:8000/logout"><i class="material-icons">logout</i></a></li>
                </ul>
                {% else %}
                <ul class="dropdown-menu">
                    <li><a href="http://127.0.0.1:8000/home/displaydetails">view profile</a></li>
                    <li><a href="http://127.0.0.1:8000/home/updatedetails">Update profile</a></li>
                    <li><a href="http://127.0.0.1:8000/home/deleteaccount">Delete Account</a></li>
                    <li><a href="http://127.0.0.1:8000/Booking/viewTicket">view tickets</a></li>
                    <li><a href="http://127.0.0.1:8000/Booking/cancelTicket">Cancel Reservation</a></li>
                    <li><a href="http://127.0.0.1:8000/Booking/usertransaction">see transactions</a></li>
                    <li><a href="http://127.0.0.1:8000/logout"><i class="material-icons">logout</i></a></li>
                </ul>
                {% endif %}
            </li>
        </ul>
    </div>
</nav>
<div class="container-fluid">
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'login/style.css' %}"/>
    <br><br>

    <div class="row">

        {% for b in bus %}
        {% if b.source == source and b.destination == destination and b.type == type %}
        <form action="http://127.0.0.1:8000/Booking/" method="POST"> {% csrf_token %}
            <div class="column">
                <div class="card">
                    <h4 style="color:red">{{ b.bus_number}}</h4>
                    <p style="color:white">
                        from: {{ b.source }}<br>
                        to: {{ b.destination }}<br>
                        departure time:  {{b.dep_time}}<br>
                        arrival time: {{b.arr_time}}<br>
                        price per seat: {{ b.pricePerSeat}} Rs.<br>
                        Available Seat : {{ b.available_seat}}
                    </p>
                    {% with var1=date var2=usrnm%}
                    <input type="hidden" name="price" value="{{b.pricePerSeat}}">
                    <input type="hidden" name="id" value="{{b.bus_id}}">
                    <input type="hidden" name="avail_seats" value="{{ b.available_seat}}">
                    <input type="hidden" name="dates" value="{{var1}}">
                    <input type="hidden" name="username" value="{{var2}}">
                    <center><button type="submit" name="submit" class="btn btn-primary">Book Seats</button></center>
                    {% endwith %}
                </div>
            </div>
        </form>
        {% endif %}
        {% endfor %}
    </div>
</div>

<!-- Option 1: Bootstrap Bundle with Popper -->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>
-->
<!-- Option 2: Separate Popper and Bootstrap JS -->

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
        integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
        integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
        crossorigin="anonymous"></script>

</body>
</html>